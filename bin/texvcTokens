#!/usr/bin/env node

var program = require('commander');

var json = require('../package.json');

program
    .version(json.version)
    .usage('[options] <tex input>')
    .option('-v, --verbose', 'Show verbose error information')
    .option('-D, --debug', 'Show stack trace on failure');


program.parse(process.argv);

var input = program.args.join(' ');

var tokens = require('../');

var result = tokens.tokens(input, { debug: program.debug });

// output result
if (result.status === '+') {
    console.log(result.status + (result.output || ''));
} else if (result.status === 'F' || program.verbose) {
    console.log(result.status + (result.details || ''));
} else {
    console.log(result.status);
}
process.exit(result.status === '+' ? 0 : 1);
